

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 5: pyATS APIs &mdash; LTRATO-2001  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />

  
      <script src="../../_static/jquery.js"></script>
      <script src="../../_static/underscore.js"></script>
      <script src="../../_static/doctools.js"></script>
      <script src="../../_static/language_data.js"></script>
      <script src="../../_static/clipboard.min.js"></script>
      <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Task 2: Writing Initial Scripts" href="../task2/index.html" />
    <link rel="prev" title="Step 4: pyATS Shell Useful Libraries" href="step4.html" /> <link href="../../_static/style.css" rel="stylesheet" type="text/css"> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            LTRATO-2001
              <img src="../../_static/cl.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#learning-objectives">Learning Objectives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../labaccess/index.html">Lab Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#ip-addressing-and-access-information">IP Addressing and Access Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#component-details">Component Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Task 1: Exploring and Verification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="step1.html">Step 1: Explore Lab Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="step2.html">Step 2: Verify pyATS Testbed File</a></li>
<li class="toctree-l3"><a class="reference internal" href="step3.html">Step 3: pyATS Capabilities using the pyATS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="step4.html">Step 4: pyATS Shell Useful Libraries</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 5: pyATS APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task2/index.html">Task 2: Writing Initial Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task2/step1.html">Step 1: Collect Show Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step2.html">Step 2: Writing Test Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task3/index.html">Task 3: Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task3/step1.html">Step 1: Verify Log Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step2.html">Step 2: Verify the Service Contracts Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step3.html">Step 3: Verify the Routing Information using Parsers and pyATS Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step4.html">Step 4: Run PING to Verify Reachability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task4/index.html">Task 4: PyATS and Robot Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task4/step1.html">Step 1: Show the Results of Tests in a Browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step2.html">Step 2: Run tests using Robot Framework</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task5/index.html">Task 5: CXTM Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task5/step1.html">Step 1: Access CXTM platform and create a new project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step2.html">Step 2: Add the device under test to the testbed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step3.html">Step 3: Configure the script and execute it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step4.html">Step 4: Configure another script and execute it</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix: A</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix.html#configuration-compliance">Configuration Compliance</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LTRATO-2001</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tasks</a></li>
          <li class="breadcrumb-item"><a href="index.html">Task 1: Exploring and Verification</a></li>
      <li class="breadcrumb-item active">Step 5: pyATS APIs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tasks/task1/step5.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="step-5-pyats-apis">
<h1>Step 5: pyATS APIs<a class="headerlink" href="#step-5-pyats-apis" title="Permalink to this headline">¶</a></h1>
<p><strong>Value Proposition:</strong> By leveraging its APIs, you can streamline the process of interacting with network devices, executing commands, and parsing the output in a consistent and structured manner.
The pyATS APIs offer a powerful abstraction layer that simplifies the complexity of working with different network operating systems and device types.
With its modular design and extensive library of supported platforms, pyATS empowers network engineers and developers to write scalable and maintainable automation scripts, enabling efficient network validation, troubleshooting, and configuration management.</p>
<p>To use the <strong>pyATS APIs</strong>, you need to follow the steps below:</p>
<ol class="arabic">
<li><p>Enter the following command to run the pyATS shell command from the Bash shell and specify the YAML testbed file as the parameter. This shell is where you can run the Python code.</p>
<blockquote>
<div><div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The interactive shell might take some time to load (approximately 20 seconds)</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyats shell --testbed-file pyats_testbed.yaml
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create variables (Python objects) to call devices easily (csr - ‘csr1000v-1’ device).</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s2">&quot;csr1000v-1&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Connect and collect the output from the CSR device.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">csr_routes</span> <span class="o">=</span> <span class="n">csr</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get_routes</span><span class="p">(</span><span class="n">protocol_codes</span><span class="o">=</span><span class="s2">&quot;O&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The protocol_codes corresponds to what we see in the output of the <cite>show ip route</cite> command.
In this case, we are looking for OSPF routes.</p>
</div>
</div></blockquote>
</li>
<li><p>Explore csr_routes by typing <code class="docutils literal notranslate"><span class="pre">csr_routes</span></code> and try to find the routes for <strong>OSPF</strong>.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;10.0.0.4/30&#39;</span><span class="p">,</span> <span class="s1">&#39;10.0.0.8/30&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.0.1/32&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.100.1/32&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s much simpler to use the <strong>APIs</strong> to get the specific output when they are available.</p>
<p>Compare the output to the output of the last step in Step 4.
The output is the same, but the method to get the output is different.</p>
<p>To look at the list of available APIs, refer to the appendix section of the documentation.</p>
</div>
<p><em>Section author: Luis Rueda &lt;<a class="reference external" href="mailto:lurueda&#37;&#52;&#48;cisco&#46;com">lurueda<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jairo Leon &lt;<a class="reference external" href="mailto:jaileon&#37;&#52;&#48;cisco&#46;com">jaileon<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;</em></p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="step4.html" class="btn btn-neutral float-left" title="Step 4: pyATS Shell Useful Libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../task2/index.html" class="btn btn-neutral float-right" title="Task 2: Writing Initial Scripts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Cisco Systems, Inc. 2020-2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>