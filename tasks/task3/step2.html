<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 2: Verify the Service Contracts Coverage &mdash; LTRATO-2001  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Step 3: Verify the Routing Information using Parsers and pyATS Learn" href="step3.html" />
    <link rel="prev" title="Step 1: Verify Log Messages" href="step1.html" /> <link href="../../_static/style.css" rel="stylesheet" type="text/css"> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            LTRATO-2001
              <img src="../../_static/CL-2023.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#learning-objectives">Learning Objectives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../labaccess/index.html">Lab Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#ip-addressing-and-access-information">IP Addressing and Access Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#component-details">Component Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../task1/index.html">Task 1: Exploring and Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task1/step1.html">Step 1: Explore Lab Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step2.html">Step 2: Verify pyATS Testbed File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step3.html">Step 3: pyATS Capabilities using the pyATS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step4.html">Step 4: pyATS Shell Useful Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task2/index.html">Task 2: Writing Initial Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task2/step1.html">Step 1: Collect Show Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step2.html">Step 2: Writing Test Script</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Task 3: Verification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="step1.html">Step 1: Verify Log Messages</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 2: Verify the Service Contracts Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="step3.html">Step 3: Verify the Routing Information using Parsers and pyATS Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="step4.html">Step 4: Run PING to Verify Reachability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task4/index.html">Task 4: Results XPRESSO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task4/step1.html">Step 1: Show the Results of Tests in a Browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step2.html">Step 2: Run tests and compare results from XPRESSO dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task5/index.html">Task 5: CXTM Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task5/step1.html">Step 1: Access CXTM platform and create a new project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step2.html">Step 2: Add the device under test to the testbed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step3.html">Step 3: Configure the script and execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step4.html">Step 4: Configure another script and execute</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix: A</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix.html#configuration-compliance">Configuration Compliance</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LTRATO-2001</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tasks</a></li>
          <li class="breadcrumb-item"><a href="index.html">Task 3: Verification</a></li>
      <li class="breadcrumb-item active">Step 2: Verify the Service Contracts Coverage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tasks/task3/step2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="step-2-verify-the-service-contracts-coverage">
<h1>Step 2: Verify the Service Contracts Coverage<a class="headerlink" href="#step-2-verify-the-service-contracts-coverage" title="Permalink to this headline">¶</a></h1>
<p><strong>Value Proposition:</strong> In this test case, we have the list of the devices’ serial numbers, covered by the service contracts, and we must verify that all the devices in the testbed are covered by the service contracts. This ensures you will be able to open a TAC case if something goes wrong when the network is in production.</p>
<p>The high-level logic of the tests will be the following:</p>
<ul class="simple">
<li><p>Connect to each device in the testbed.</p></li>
<li><p>Parse the output of the <strong>show inventory</strong> command to find the device’s serial number (SN).</p></li>
<li><p>Verify whether the SN is in the list, covered by the service contracts.</p></li>
</ul>
<ol class="arabic">
<li><p>Let’s use the pyATS shell to test our idea.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyats shell --testbed-file pyats_testbed.yaml
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Copy the following code into the pyATS shell:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;csr1000v-1&#39;</span><span class="p">]</span>
<span class="n">asa</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;asav-1&#39;</span><span class="p">]</span>
<span class="n">nx</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;nx-osv-1&#39;</span><span class="p">]</span>
<span class="n">csr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">asa</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>pyATS uses the <strong>parse</strong> method to collect the output of different show commands and parses it into a structured format (Python dictionary). Let’s collect the output of the <strong>show inventory</strong> commands and parse it using the <strong>parse</strong> method.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr_output</span> <span class="o">=</span> <span class="n">csr</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
<span class="n">asa_output</span> <span class="o">=</span> <span class="n">asa</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
<span class="n">nx_output</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Now we can observe the structure of parsed outputs. We are starting with the parsed output for <strong>csr1000v-1</strong>. Review it and pay special attention to the highlighted sections.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Python library <strong>pprint</strong> will be used in this task. This is used to break the output (Python dictionary) into multiple lines, which is easier to check, instead of having it all on one line.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">csr_output</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Observe the output:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">3</span><span class="o">]</span>: import pprint
    ...: pprint.pprint<span class="o">(</span>csr_output<span class="o">)</span>
<span class="hll"><span class="o">{</span><span class="s1">&#39;main&#39;</span>: <span class="o">{</span><span class="s1">&#39;chassis&#39;</span>: <span class="o">{</span><span class="s1">&#39;CSR1000V&#39;</span>: <span class="o">{</span><span class="s1">&#39;descr&#39;</span>: <span class="s1">&#39;Cisco CSR1000V Chassis&#39;</span>,
</span><span class="hll">                                <span class="s1">&#39;name&#39;</span>: <span class="s1">&#39;Chassis&#39;</span>,
</span><span class="hll">                                <span class="s1">&#39;pid&#39;</span>: <span class="s1">&#39;CSR1000V&#39;</span>,
</span><span class="hll">                                <span class="s1">&#39;sn&#39;</span>: <span class="s1">&#39;93DU60U0JDU&#39;</span>,
</span><span class="hll">                                <span class="s1">&#39;vid&#39;</span>: <span class="s1">&#39;V00&#39;</span><span class="o">}}}</span>,
</span><span class="hll"><span class="s1">&#39;slot&#39;</span>: <span class="o">{</span><span class="s1">&#39;F0&#39;</span>: <span class="o">{</span><span class="s1">&#39;other&#39;</span>: <span class="o">{</span><span class="s1">&#39;CSR1000V&#39;</span>: <span class="o">{</span><span class="s1">&#39;descr&#39;</span>: <span class="s1">&#39;Cisco CSR1000V Embedded &#39;</span>
</span><span class="hll">                                                <span class="s1">&#39;Services Processor&#39;</span>,
</span><span class="hll">                                        <span class="s1">&#39;name&#39;</span>: <span class="s1">&#39;module F0&#39;</span>,
</span><span class="hll">                                        <span class="s1">&#39;pid&#39;</span>: <span class="s1">&#39;CSR1000V&#39;</span>,
</span><span class="hll">                                        <span class="s1">&#39;sn&#39;</span>: <span class="s1">&#39;&#39;</span>,
</span><span class="hll">                                        <span class="s1">&#39;vid&#39;</span>: <span class="s1">&#39;&#39;</span><span class="o">}}}</span>,
</span><span class="hll">        <span class="s1">&#39;R0&#39;</span>: <span class="o">{</span><span class="s1">&#39;rp&#39;</span>: <span class="o">{</span><span class="s1">&#39;CSR1000V&#39;</span>: <span class="o">{</span><span class="s1">&#39;descr&#39;</span>: <span class="s1">&#39;Cisco CSR1000V Route Processor&#39;</span>,
</span><span class="hll">                                    <span class="s1">&#39;name&#39;</span>: <span class="s1">&#39;module R0&#39;</span>,
</span><span class="hll">                                    <span class="s1">&#39;pid&#39;</span>: <span class="s1">&#39;CSR1000V&#39;</span>,
</span><span class="hll">                                    <span class="s1">&#39;sn&#39;</span>: <span class="s1">&#39;JAB1303001C&#39;</span>,
</span><span class="hll">                                    <span class="s1">&#39;vid&#39;</span>: <span class="s1">&#39;V00&#39;</span><span class="o">}}}}}</span>
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p>Get the serial number of <strong>csr1000v-1</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr_output</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;chassis&#39;</span><span class="p">][</span><span class="s1">&#39;CSR1000V&#39;</span><span class="p">][</span><span class="s1">&#39;sn&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The result of the code should contain a serial number collected in the previous step.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">4</span><span class="o">]</span>: csr_output<span class="o">[</span><span class="s1">&#39;main&#39;</span><span class="o">][</span><span class="s1">&#39;chassis&#39;</span><span class="o">][</span><span class="s1">&#39;CSR1000V&#39;</span><span class="o">][</span><span class="s1">&#39;sn&#39;</span><span class="o">]</span>
Out <span class="o">[</span><span class="m">4</span><span class="o">]</span>: <span class="s1">&#39;9KZZ4X737UP&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Obtain the parsed output for <strong>asav-1</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">asa_output</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Observe the output:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">5</span><span class="o">]</span>: pprint.pprint<span class="o">(</span>asa_output<span class="o">)</span>
<span class="o">{</span><span class="s1">&#39;Chassis&#39;</span>: <span class="o">{</span><span class="s1">&#39;description&#39;</span>: <span class="s1">&#39;ASAv Adaptive Security Virtual Appliance&#39;</span>,
            <span class="s1">&#39;pid&#39;</span>: <span class="s1">&#39;ASAv&#39;</span>,
            <span class="s1">&#39;sn&#39;</span>: <span class="s1">&#39;9AFQR3ND0EG&#39;</span>,
            <span class="s1">&#39;vid&#39;</span>: <span class="s1">&#39;V01&#39;</span><span class="o">}}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Get the serial number of <strong>asav-1</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">asa_output</span><span class="p">[</span><span class="s1">&#39;Chassis&#39;</span><span class="p">][</span><span class="s1">&#39;sn&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The result of the code should contain a serial number collected in the previous step.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">6</span><span class="o">]</span>: asa_output<span class="o">[</span><span class="s1">&#39;Chassis&#39;</span><span class="o">][</span><span class="s1">&#39;sn&#39;</span><span class="o">]</span>
Out<span class="o">[</span><span class="m">6</span><span class="o">]</span>: <span class="s1">&#39;9AFQR3ND0EG&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Obtain the parsed output for <strong>nx-osv-1</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">nx_output</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Observe the output:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Out <span class="o">[</span><span class="m">1</span><span class="o">]</span>: <span class="o">{</span><span class="s1">&#39;name&#39;</span>: <span class="o">{</span><span class="s1">&#39;Chassis&#39;</span>: <span class="o">{</span><span class="s1">&#39;description&#39;</span>: <span class="s1">&#39;Nexus9000 9000v Chassis&#39;</span>,
              <span class="s1">&#39;pid&#39;</span>: <span class="s1">&#39;N9K-9000v&#39;</span>,
              <span class="s1">&#39;serial_number&#39;</span>: <span class="s1">&#39;9712TV4C2JF&#39;</span>,
              <span class="s1">&#39;slot&#39;</span>: <span class="s1">&#39;None&#39;</span>,
              <span class="s1">&#39;vid&#39;</span>: <span class="s1">&#39;V02&#39;</span><span class="o">}</span>,
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Get the serial number of <strong>nx-osv-1</strong></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nx_output</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="s1">&#39;Chassis&#39;</span><span class="p">][</span><span class="s1">&#39;serial_number&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The result of the code should contain a serial number collected in the previous step.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">7</span><span class="o">]</span>: nx_output<span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">][</span><span class="s1">&#39;Chassis&#39;</span><span class="o">][</span><span class="s1">&#39;serial_number&#39;</span><span class="o">]</span>
Out<span class="o">[</span><span class="m">7</span><span class="o">]</span>: <span class="s1">&#39;9EIFZPG7ZAM&#39;</span>
</pre></div>
</div>
<p>Now we have all the needed information to write the next test script.</p>
</div></blockquote>
</li>
<li><p>Exit the pyATS shell using the <strong>exit</strong> command.</p></li>
<li><p>Open the file task3step2.py in <strong>Nano</strong> editor:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano task3step2.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Review the content of the <strong>Inventory</strong> test case. Note that we use the data structure learned from the pyATS shell in the previous step to extract a serial number from the output of the <strong>show inventory</strong> command:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
<span class="k">def</span> <span class="nf">inventory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">device</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">device</span><span class="o">.</span><span class="n">os</span> <span class="o">==</span> <span class="s1">&#39;iosxe&#39;</span><span class="p">:</span>
        <span class="n">csr_output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
<span class="hll">        <span class="n">chassis_sn</span> <span class="o">=</span> <span class="n">csr_output</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;chassis&#39;</span><span class="p">][</span><span class="s1">&#39;CSR1000V&#39;</span><span class="p">][</span><span class="s1">&#39;sn&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The path to fetch the serial number from the structures has been explored in the previous step with the pyATS shell. Variables out2 and out3 are used:</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">elif</span> <span class="n">device</span><span class="o">.</span><span class="n">os</span> <span class="o">==</span> <span class="s1">&#39;nxos&#39;</span><span class="p">:</span>
    <span class="n">nx_output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
<span class="hll">    <span class="n">chassis_sn</span> <span class="o">=</span> <span class="n">nx_output</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="s1">&#39;Chassis&#39;</span><span class="p">][</span><span class="s1">&#39;serial_number&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
<p>The serial number shown below is provided as an example. It would be different on the equipment in a lab.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">elif</span> <span class="n">device</span><span class="o">.</span><span class="n">os</span> <span class="o">==</span> <span class="s1">&#39;asa&#39;</span><span class="p">:</span>
    <span class="n">asa_output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;show inventory&#39;</span><span class="p">)</span>
<span class="hll">    <span class="n">chassis_sn</span> <span class="o">=</span> <span class="n">asa_output</span><span class="p">[</span><span class="s1">&#39;Chassis&#39;</span><span class="p">][</span><span class="s1">&#39;sn&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p>Exit Nano without saving by pressing <span class="guilabel">Ctrl + X</span></p></li>
<li><p>Execute the test script and check the <strong>Detailed Results</strong> section.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python task3step2.py --testbed pyats_testbed.yaml
</pre></div>
</div>
<p>What are the results of these testcases? All FAILED? Do you have a clue as to why? Continue reading to understand why.</p>
<a class="reference internal image-reference" href="../../_images/task7_labpyats_1.png"><img alt="../../_images/task7_labpyats_1.png" class="align-center" src="../../_images/task7_labpyats_1.png" style="width: 75%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>All the tests have failed because we have serial numbers from a different network in our contract SNs list at the beginning of <strong>task3step2.py</strong> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_sn</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;9AQHSSAS8AU&#39;</span><span class="p">,</span> <span class="s1">&#39;9Q3YV06WJ71&#39;</span><span class="p">,</span> <span class="s1">&#39;9IFUH4GPSGL&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Open the file task3step2.py in <strong>Nano</strong> editor.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano task3step2.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Replace the serial numbers in the list <strong>contract_sn</strong> with SNs from our testbed’s equipment.</p></li>
<li><p>When you finish, save changes to file task3step2.py by pressing:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Ctrl + O
File Name to Write: task3step2.py
Hit <span class="o">[</span>Enter<span class="o">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The correct SNs from testbed can be obtained also from the previous script’s output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2020</span>-01-23T13:20:24: %AETEST-ERROR:Failed reason: 9AQHSSAS8AU is not covered by contract

<span class="c1"># ...</span>

<span class="m">2020</span>-01-23T13:20:25: %AETEST-ERROR:Failed reason: 9Q3YV06WJ71 is not covered by contract

<span class="c1"># ...</span>

<span class="m">2020</span>-01-23T13:20:26: %AETEST-ERROR:Failed reason: 9IFUH4GPSGL is not covered by contract
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Еxecute the modified test script once again:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python task3step2.py --testbed pyats_testbed.yaml
</pre></div>
</div>
<p>Now all the testcases should succeed:</p>
<a class="reference internal image-reference" href="../../_images/task7_labpyats_2.png"><img alt="../../_images/task7_labpyats_2.png" class="align-center" src="../../_images/task7_labpyats_2.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
</ol>
<p><em>Section author: Luis Rueda &lt;<a class="reference external" href="mailto:lurueda&#37;&#52;&#48;cisco&#46;com">lurueda<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jairo Leon &lt;<a class="reference external" href="mailto:jaileon&#37;&#52;&#48;cisco&#46;com">jaileon<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;</em></p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="step1.html" class="btn btn-neutral float-left" title="Step 1: Verify Log Messages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="step3.html" class="btn btn-neutral float-right" title="Step 3: Verify the Routing Information using Parsers and pyATS Learn" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Cisco Systems, Inc. 2020.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>