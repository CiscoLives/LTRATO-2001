<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 1: Verify Log Messages &mdash; LTRATO-2001  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Step 2: Verify the Service Contracts Coverage" href="step2.html" />
    <link rel="prev" title="Task 3: Verification" href="index.html" /> <link href="../../_static/style.css" rel="stylesheet" type="text/css"> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            LTRATO-2001
              <img src="../../_static/cl.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#learning-objectives">Learning Objectives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../labaccess/index.html">Lab Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#ip-addressing-and-access-information">IP Addressing and Access Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#component-details">Component Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../task1/index.html">Task 1: Exploring and Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task1/step1.html">Step 1: Explore Lab Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step2.html">Step 2: Verify pyATS Testbed File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step3.html">Step 3: pyATS Capabilities using the pyATS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step4.html">Step 4: pyATS Shell Useful Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step5.html">Step 5: pyATS APIs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task2/index.html">Task 2: Writing Initial Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task2/step1.html">Step 1: Collect Show Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step2.html">Step 2: Writing Test Script</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Task 3: Verification</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 1: Verify Log Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="step2.html">Step 2: Verify the Service Contracts Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="step3.html">Step 3: Verify the Routing Information using Parsers and pyATS Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="step4.html">Step 4: Run PING to Verify Reachability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task4/index.html">Task 4: Results XPRESSO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task4/step1.html">Step 1: Show the Results of Tests in a Browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step2.html">Step 2: Run tests and compare results from XPRESSO dashboard</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task5/index.html">Task 5: CXTM Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task5/step1.html">Step 1: Access CXTM platform and create a new project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step2.html">Step 2: Add the device under test to the testbed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step3.html">Step 3: Configure the script and execute it</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task5/step4.html">Step 4: Configure another script and execute it</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix: A</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix.html#configuration-compliance">Configuration Compliance</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LTRATO-2001</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tasks</a></li>
          <li class="breadcrumb-item"><a href="index.html">Task 3: Verification</a></li>
      <li class="breadcrumb-item active">Step 1: Verify Log Messages</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tasks/task3/step1.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="step-1-verify-log-messages">
<h1>Step 1: Verify Log Messages<a class="headerlink" href="#step-1-verify-log-messages" title="Permalink to this headline">¶</a></h1>
<p><strong>Value Proposition:</strong> In this test case, we will verify that devices do not have logging messages with severity ERROR or WARN.</p>
<p>The high-level logic of the test case will be as follows:</p>
<ul class="simple">
<li><p>Connect to each device in the testbed.</p></li>
<li><p>Collect the output of <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">logging</span> <span class="pre">|</span> <span class="pre">include</span> <span class="pre">ERROR|WARN</span></code>.</p></li>
<li><p>If the output contains more than 0 strings, it means pyATS found messages, and the test should fail for this device. Otherwise, the test should succeed.</p></li>
</ul>
<ol class="arabic">
<li><p>Before creating our test case, connect to ASA. Launch <strong>PuTTY</strong> and connect to <strong>asav-1</strong> (username: <code class="docutils literal notranslate"><span class="pre">cisco</span></code>, password: <code class="docutils literal notranslate"><span class="pre">cisco</span></code>) and enter the following commands:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>clear logging buffer
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/asav-clear-logging-buffer.png"><img alt="../../_images/asav-clear-logging-buffer.png" class="align-center" src="../../_images/asav-clear-logging-buffer.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Let’s open the pyATS shell and check it out.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pyats shell --testbed-file pyats_testbed.yaml
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Input the following code into pyATS shell:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;csr1000v-1&#39;</span><span class="p">]</span>
<span class="n">asa</span> <span class="o">=</span> <span class="n">testbed</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;asav-1&#39;</span><span class="p">]</span>
<span class="n">csr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">asa</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Let’s verify whether there are any errors or warning messages in the logs:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csr_output</span> <span class="o">=</span> <span class="n">csr</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show logging | include ERROR|WARN&#39;</span><span class="p">)</span>
<span class="n">asa_output</span> <span class="o">=</span> <span class="n">asa</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show logging | include ERROR|WARN&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output for ASA should be empty.
If you don’t see any ERROR logs on the csr1000v-1 device, then:</p>
<ol class="arabic">
<li><dl class="simple">
<dt>Connect to CSR:</dt><dd><ul class="simple">
<li><p>Launch PuTTY and connect to <strong>csr1000v-1</strong>. Username: <code class="docutils literal notranslate"><span class="pre">cisco</span></code>, password: <code class="docutils literal notranslate"><span class="pre">cisco</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>Generate a test ERROR message:</dt><dd><ul class="simple">
<li><p>csr1000v-1# <strong>send log ‘Test ERROR message for pyATS’</strong></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>send log <span class="s1">&#39;Test ERROR message for pyATS&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><p>Repeat step 3 above for CSR in the pyATS shell:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">csr_output</span> <span class="o">=</span> csr.execute<span class="o">(</span><span class="s1">&#39;show logging | i ERROR|WARN&#39;</span><span class="o">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
</div></blockquote>
</li>
<li><p>To check whether there is an empty or non-empty output, we will use the Python <strong>len()</strong> built-in function, which returns the length of the given string. If the collected output is empty, then <strong>len()</strong> of the output will be 0; otherwise, the result will be greater than 0.</p>
<blockquote>
<div><p>Input into pyATS shell:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">asa_output</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The resulting length is 0, which means that the output from ASA is empty:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">3</span><span class="o">]</span>: len<span class="o">(</span>asa_output<span class="o">)</span>
   ...:
Out<span class="o">[</span><span class="m">3</span><span class="o">]</span>: <span class="m">0</span>
</pre></div>
</div>
</div></blockquote>
<p>Input into pyATS shell:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">csr_output</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>The resulting length is greater than 0, which means the output from CSR is not empty:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>In <span class="o">[</span><span class="m">4</span><span class="o">]</span>: len<span class="o">(</span>csr_output<span class="o">)</span>
Out<span class="o">[</span><span class="m">4</span><span class="o">]</span>: <span class="m">211</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><p>Exit pyATS shell using the <strong>exit</strong> command.</p></li>
<li><p>Open the file task3step1a.py in Nano editor:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano task3step1a.py
</pre></div>
</div>
<p>The file reuses the <strong>establish_connections</strong> method from task2step2.py, which helps us connect to all the devices in the testbed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pay special attention to the following code:</p>
<p>The method self.parent.parameters.update(dev=device_list), located at the end of the establish_connections(self,testbed) method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@aetest</span><span class="o">.</span><span class="n">subsection</span>
<span class="k">def</span> <span class="nf">establish_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pyats_testbed</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Establishes connections to all devices in testbed</span>
<span class="sd">    :param testbed:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">device_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">pyats_testbed</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">banner</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Connecting to device &#39;</span><span class="si">{device.name}</span><span class="s2">&#39;...&quot;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">device</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">log_stdout</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to establish a connection to &#39;</span><span class="si">{device.name}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="n">device_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    <span class="c1"># Pass list of devices to testcases</span>
<span class="hll">    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dev</span><span class="o">=</span><span class="n">device_list</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Where <strong>self.parent.parameters</strong> is an attribute of class <strong>aetest</strong>, and <strong>aetest</strong> is the class from which all the test case classes and <strong>MyCommonSetup</strong> class are inherited from:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommonSetup</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">CommonSetup</span><span class="p">):</span>
    <span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">VerifyLogging</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>Using <strong>self.parent.parameters</strong>, the arguments of the attribute can be passed between different classes.
As an example, in the class <strong>MyCommonSetup</strong>, we store all the devices from the variable <strong>device_list</strong> in the parameter <strong>parameters[‘dev’]</strong>.
self.parent.parameters.update(dev=device_list)
Then we can access all the devices in the class VerifyLogging, using the method <strong>self.parent.parameters[‘dev’]</strong>.</p>
</div>
</div></blockquote>
</li>
<li><p>The code in the class <strong>VerifyLogging</strong>, is used to implement the logic which we have already tested using pyATS shell. The logic is that if the output length is greater than zero, the output contains ERROR or WARN messages. The test should then be marked as failed.</p>
<blockquote>
<div><ul class="simple">
<li><p>The <strong>device.connect(log_stdout=False)</strong> is used in this example (see <strong>def establish_connections</strong>).</p></li>
<li><p>This code (log_stdout=False) - disables all logging to a screen for the whole connection session. To make the execution of the command on a device visible <strong>(show logging | i ERROR|WARN)</strong> in the output of the test, the following code is used: <strong>any_device.log_user(enable=True)</strong></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="k">class</span> <span class="nc">VerifyLogging</span><span class="p">(</span><span class="n">aetest</span><span class="o">.</span><span class="n">Testcase</span><span class="p">):</span>
</span>
    <span class="c1"># ...</span>

    <span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
    <span class="k">def</span> <span class="nf">error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">any_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s2">&quot;dev&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">any_device</span><span class="o">.</span><span class="n">log_user</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">any_device</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show logging | include ERROR|WARN&quot;)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="s2">&quot;Found messages in log that are either ERROR or WARN, review logs first&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Setup section of the test case is not used, Python’s <strong>pass</strong> command is added, to keep the method as a placeholder. We will use the Setup section of the test case later when we execute the <strong>show logging | i ERROR|WARN</strong> command on multiple devices.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@aetest</span><span class="o">.</span><span class="n">setup</span>
<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="hll">    <span class="k">pass</span>
</span></pre></div>
</div>
</div></blockquote>
</div>
</div></blockquote>
</li>
<li><p>Exit Nano without saving by pressing <span class="guilabel">Ctrl + X</span></p></li>
<li><p>Execute the test script <strong>task3step1a.py</strong> and check the results section.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python task3step1a.py --testbed pyats_testbed.yaml
</pre></div>
</div>
<p>The test case <strong>error_log</strong> will run only for one device.
Now we need to get familiar with the <strong>aetest.loop</strong> method, which will let us repeat an elementary test case (written for one device) for every device in the testbed.</p>
</div></blockquote>
</li>
<li><p>Open the file task3step1b.py.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nano task3step1b.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this task, we will learn how to use dynamic loops, which allow us to loop over the different testbed devices even if we do not know at coding time what the devices’ names are.</p>
<p>This approach is helpful if we don’t want to hardcode device names inside our test case, but we want to dynamically load devices from the testbed file and run test cases across them.</p>
</div>
</div></blockquote>
</li>
<li><p>Pay special attention to the code in <strong>error_logs</strong> method. It receives <strong>device</strong> object as an argument on input and collects the command from this <strong>device</strong>.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@aetest</span><span class="o">.</span><span class="n">test</span>
<span class="hll"><span class="k">def</span> <span class="nf">error_logs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">):</span>
</span>    <span class="n">output</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;show logging | include ERROR|WARN&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">failed</span><span class="p">(</span><span class="s1">&#39;Found ERROR in log, review logs first&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Next, check the <strong>setup(self)</strong> method of class <strong>VerifyLogging</strong>. The method <strong>setup(self)</strong> is used to load all the devices from the testbed and run the <strong>error_logs</strong> method once for each device.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@aetest</span><span class="o">.</span><span class="n">setup</span>
<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">devices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="s1">&#39;dev&#39;</span><span class="p">]</span>
<span class="hll">    <span class="n">aetest</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">mark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_logs</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">devices</span><span class="p">)</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>aetest.loop.mark()</strong> instructs method <strong>self.error_logs</strong> to take an argument for input variable ‘device’, one-by-one from the devices list, and run a testcase for each device separately.</p>
</div>
</div></blockquote>
</li>
<li><p>Exit Nano without saving by pressing <span class="guilabel">Ctrl + X</span></p></li>
<li><p>Execute the test script. The test case <strong>error_logs</strong> will run for all the devices in the testbed:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python task3step1b.py --testbed pyats_testbed.yaml
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Check the <strong>VerifyLogging</strong> results section. The test for <strong>asav-1</strong> should pass, whereas for <strong>csr1000v-1</strong> and <strong>nx-osv-1</strong> should fail because these devices have error messages in the logs.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/error-log-results.png"><img alt="../../_images/error-log-results.png" class="align-center" src="../../_images/error-log-results.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
</ol>
<p><em>Section author: Luis Rueda &lt;<a class="reference external" href="mailto:lurueda&#37;&#52;&#48;cisco&#46;com">lurueda<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jairo Leon &lt;<a class="reference external" href="mailto:jaileon&#37;&#52;&#48;cisco&#46;com">jaileon<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;</em></p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Task 3: Verification" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="step2.html" class="btn btn-neutral float-right" title="Step 2: Verify the Service Contracts Coverage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Cisco Systems, Inc. 2020.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>