<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 3: Configure the script and execute it &mdash; LTRATO-2001  documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Step 4: Configure another script and execute it" href="step4.html" />
    <link rel="prev" title="Step 2: Add the device under test to the testbed" href="step2.html" /> <link href="../../_static/style.css" rel="stylesheet" type="text/css"> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            LTRATO-2001
              <img src="../../_static/cl.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#learning-objectives">Learning Objectives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../labaccess/index.html">Lab Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#ip-addressing-and-access-information">IP Addressing and Access Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#component-details">Component Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../labaccess/index.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../task1/index.html">Task 1: Exploring and Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task1/step1.html">Step 1: Explore Lab Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step2.html">Step 2: Verify pyATS Testbed File</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step3.html">Step 3: pyATS Capabilities using the pyATS Shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task1/step4.html">Step 4: pyATS Shell Useful Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task2/index.html">Task 2: Writing Initial Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task2/step1.html">Step 1: Collect Show Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task2/step2.html">Step 2: Writing Test Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task3/index.html">Task 3: Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task3/step1.html">Step 1: Verify Log Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step2.html">Step 2: Verify the Service Contracts Coverage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step3.html">Step 3: Verify the Routing Information using Parsers and pyATS Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task3/step4.html">Step 4: Run PING to Verify Reachability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../task4/index.html">Task 4: Results XPRESSO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../task4/step1.html">Step 1: Show the Results of Tests in a Browser</a></li>
<li class="toctree-l3"><a class="reference internal" href="../task4/step2.html">Step 2: Run tests and compare results from XPRESSO dashboard</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Task 5: CXTM Framework</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="step1.html">Step 1: Access CXTM platform and create a new project</a></li>
<li class="toctree-l3"><a class="reference internal" href="step2.html">Step 2: Add the device under test to the testbed</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 3: Configure the script and execute it</a></li>
<li class="toctree-l3"><a class="reference internal" href="step4.html">Step 4: Configure another script and execute it</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conclusions.html">Conclusions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix.html">Appendix: A</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#links">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendix.html#configuration-compliance">Configuration Compliance</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">LTRATO-2001</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Tasks</a></li>
          <li class="breadcrumb-item"><a href="index.html">Task 5: CXTM Framework</a></li>
      <li class="breadcrumb-item active">Step 3: Configure the script and execute it</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/tasks/task5/step3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="step-3-configure-the-script-and-execute-it">
<h1>Step 3: Configure the script and execute it<a class="headerlink" href="#step-3-configure-the-script-and-execute-it" title="Permalink to this headline">¶</a></h1>
<p><strong>Value Proposition:</strong> In this step, we will create a script and execute it, to run the desired tests against the device under test.</p>
<ol class="arabic">
<li><p>Expand the left-hand navigational panel and scroll down to <span class="guilabel">Test Cases</span> and click on the <span class="guilabel">Test Cases</span> sub-section.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-cases.png"><img alt="../../_images/cxtm-test-cases.png" class="align-center" src="../../_images/cxtm-test-cases.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Let’s now add a new test case by clicking on the <span class="guilabel">+</span> button.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-add.png"><img alt="../../_images/cxtm-test-case-add.png" class="align-center" src="../../_images/cxtm-test-case-add.png" style="width: 75%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A pop-up will appear, enter the information for the test case as detailed in the following image. Click on the <span class="guilabel">SUBMIT</span> button when you are done.</p>
<a class="reference internal image-reference" href="../../_images/cxtm-test-case-add-details.png"><img alt="../../_images/cxtm-test-case-add-details.png" class="align-center" src="../../_images/cxtm-test-case-add-details.png" style="width: 55%;" /></a>
</div></blockquote>
</li>
<li><p>Click on the <span class="guilabel">Open</span> link to display the test case details.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-open-test-case.png"><img alt="../../_images/cxtm-open-test-case.png" class="align-center" src="../../_images/cxtm-open-test-case.png" style="width: 75%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A page will open, click on the <span class="guilabel">Configure Automation</span> button.</p>
<a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation.png"><img alt="../../_images/cxtm-test-case-configure-automation.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>The New Job File will be displayed, this screen contains an editor for ROBOT framework code execution. By default, this editor is populated with the basic ROBOT automation testing job-file. This default job-file that is loaded can be customized to your testing needs in the left-hand navigational panel.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-editor.png"><img alt="../../_images/cxtm-test-case-configure-automation-editor.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-editor.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">***</span> <span class="pre">Test</span> <span class="pre">Cases</span> <span class="pre">***</span></code> section with the following contents:</p>
<blockquote>
<div><div class="highlight-robotframework notranslate"><div class="highlight"><pre><span></span><span class="gh">*** Test Cases ***</span><span class="p"></span>

<span class="gu">1. CONNECT TO DEVICE UNDER TEST (SSH)</span><span class="p"></span>
<span class="p">    </span><span class="nf">connect to device &quot;nx-osv-1&quot;</span><span class="p"></span>

<span class="gu">2. VALIDATE VERSION ON THE DUTS AND INITIALIZING LOGGING</span><span class="p"></span>
<span class="p">    </span><span class="nf">run &quot;show version&quot;</span><span class="p"></span>
<span class="p">    </span><span class="nf">run &quot;show inventory&quot;</span><span class="p"></span>

<span class="gu">3. COLLECT RUNNING CONFIGURATION FROM ALL DUTS</span><span class="p"></span>
<span class="p">    </span><span class="nf">initialize logging to &quot;show_version_and_running_configuration.txt&quot;</span><span class="p">   </span><span class="c"># initialize logging</span>
<span class="p">    </span><span class="nf">activate report &quot;show_version_and_running_configuration.txt&quot;</span><span class="p"></span>
<span class="p">    </span><span class="nf">run &quot;show ip route&quot;</span><span class="p"></span>
<span class="p">    </span><span class="nf">run &quot;show ip route summary&quot;</span><span class="p"></span>
<span class="p">    </span><span class="nf">disable report logging</span><span class="p">   </span><span class="c">#Disabling the show_version_and_running_configuration.txt logging report</span>

<span class="gu">4. VERIFY IPV4 ROUTE BEFORE CLEAR COMMAND ON DUT1</span><span class="p"></span>
<span class="p">    </span><span class="nf">run parsed json &quot;sh ip route summary&quot;</span><span class="p"></span>
<span class="p">    ${</span><span class="nv">ROUTE_COUNT_BEFORE</span><span class="p">}=  </span><span class="nf">get parsed &quot;routes&quot;</span><span class="p">      </span><span class="c">#IPV4 route count before clear ipv4 routes</span>
<span class="p">    </span><span class="nf">Set Global Variable</span><span class="p">  ${</span><span class="nv">ROUTE_COUNT_BEFORE</span><span class="p">}</span>

<span class="gu">5. CLEAR IPV4 ROUTES ON DUT1</span><span class="p"></span>
<span class="p">    </span><span class="nf">run &quot;clear ip route *&quot;</span><span class="p"></span>
<span class="p">    ${</span><span class="nv">status</span><span class="p">}=  </span><span class="nf">Run Keyword And Return Status</span><span class="p">  </span><span class="s">output contains &quot;Clearing ALL routes&quot;</span><span class="p"></span>
<span class="p">    </span><span class="nf">Run Keyword If</span><span class="p">  </span><span class="s">&#39;</span><span class="p">${</span><span class="nv">status</span><span class="p">}</span><span class="s">&#39; == &#39;False&#39;</span><span class="p">  </span><span class="s">Fatal Error</span><span class="p">  </span><span class="s">++UNSUCCESSFUL++ </span><span class="p">${</span><span class="nv">DUT1</span><span class="p">}</span><span class="s"> IPv4 routes not successfully cleared</span><span class="p"></span>
<span class="p">    ...  </span><span class="s">ELSE</span><span class="p">  </span><span class="s">set test message</span><span class="p">  </span><span class="s">++SUCCESSFUL++ IPV4 routes cleared successfully \n</span><span class="p">  </span><span class="s">append=True</span><span class="p"></span>

<span class="gu">6. VALIDATE IPV4 ROUTES AFTER CLEAR COMMAND ON DUT1</span><span class="p"></span>
<span class="p">    </span><span class="nf">sleep</span><span class="p">  </span><span class="s">30</span><span class="p">  </span><span class="c">#For learning routes</span>
<span class="p">    </span><span class="nf">run parsed json &quot;sh ip route summary&quot;</span><span class="p"></span>
<span class="p">    ${</span><span class="nv">ROUTE_COUNT_AFTER</span><span class="p">}=  </span><span class="nf">get parsed &quot;routes&quot;</span><span class="p">      </span><span class="c">#IPV4 route count after clear ipv4 routes</span>
<span class="p">    </span><span class="nf">Run Keyword If</span><span class="p">  </span><span class="s">&#39;</span><span class="p">${</span><span class="nv">ROUTE_COUNT_AFTER</span><span class="p">}</span><span class="s">&#39; != &#39;</span><span class="p">${</span><span class="nv">ROUTE_COUNT_BEFORE</span><span class="p">}</span><span class="s">&#39;</span><span class="p">  </span><span class="s">FAIL</span><span class="p">  </span><span class="s">++UNSUCCESSFUL++ </span><span class="p">${</span><span class="nv">DUT1</span><span class="p">}</span><span class="s"> - Either few or all IPv4 routes are not learnt after &#39;clear ipv4 route&#39; command</span><span class="p"></span>
<span class="p">    ...  </span><span class="s">ELSE</span><span class="p">  </span><span class="s">set test message</span><span class="p">  </span><span class="s">++SUCCESSFUL++ All IPV4 routes are learnt successfully after &#39;clear ipv4 route&#39; command\n</span><span class="p">  </span><span class="s">append=True</span><span class="p"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ROBOT is readable by everyone! i.e.   run “show inventory”</p>
<p>The above statement in plain English from the Robot Framework test case is called a ROBOT keyword. These are generic and reusable terms. Our automation developers define and implement Robot Framework keywords in Python behind the scenes, allowing customers and engineers to focus on the breakdown of test steps for readability and usability using ROBOT. Our developers &amp; testers work together to create more keywords that express different test automation scenarios. Customers can also add their keywords if needed. As keyword count increases, test automation velocity increases as less time is spent re-writing the same automation (how many times have you seen the same interface flap code repeated!?)</p>
</div>
</div></blockquote>
</li>
<li><p>We now have a full ROBOT test. Select the latest “Runtime Image Version” container that has all these keyword libraries. Select <code class="docutils literal notranslate"><span class="pre">cxta:23.8</span></code>. Select <span class="guilabel">Save</span> to save this job file.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-save.png"><img alt="../../_images/cxtm-test-case-configure-automation-save.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-save.png" style="width: 75%;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In case you see a warning message about <strong>Autocomplete may not work</strong> when you select the Runtime Image Version, please ignore it and continue.</p>
</div>
</div></blockquote>
</li>
<li><p>We are now ready to run our first ROBOT test case! Click on the <span class="guilabel">Run</span> button in the execution section to begin the test.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-run.png"><img alt="../../_images/cxtm-test-case-configure-automation-run.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-run.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>The test will now show <cite>STARTED</cite>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can click on the Task Id link to watch the job execution in real time. This test is executed very quickly. After a minute, if your screen does not load (stays black), click the job-file name ‘Verify routing information’ in the link at the top of the page to get back to the testing summary page.</p>
</div>
</div></blockquote>
</li>
<li><p>The execution status will show <cite>COMPLETED</cite> for successful execution. If the execution status is anything other than <cite>COMPLETED</cite>, please reach out to your session speakers.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-completed.png"><img alt="../../_images/cxtm-test-case-configure-automation-completed.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-completed.png" style="width: 55%;" /></a>
</div></blockquote>
</li>
<li><p>Refresh the page to see the execution details and move to the <cite>Run History</cite> section.</p></li>
<li><p>The Run History section will show all previous runs of this test case. Each test case run has a time stamp and the job result. Click the job time stamp to review the test results when the ROBOT test case is finished executing.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-run-history.png"><img alt="../../_images/cxtm-test-case-configure-automation-run-history.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-run-history.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Click on the <code class="docutils literal notranslate"><span class="pre">log.html</span></code>  in the artifact section to view the full audit trail of the script events and the logs associated with the execution.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-run-history-log-html.png"><img alt="../../_images/cxtm-test-case-configure-automation-run-history-log-html.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-run-history-log-html.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Click on <span class="guilabel">+</span> to expand this keyword section.  Notice that by expanding the various keywords, you can see more detail at each step. The steps here show that the first keyword <cite>load testbed</cite> loaded the topology file you created earlier in this exercise. The next step connects to device “nx-osv-1” using the connection information provided to connect to the device.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand.png"><img alt="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
<li><p>Expand Step #4 and Step #6 to view the output execution for “show ip route summary” of existing route count on the device before and after clearing routes on Step #5 to make sure they are back in a good operating state.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand-2.png"><img alt="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand-2.png" class="align-center" src="../../_images/cxtm-test-case-configure-automation-run-history-log-html-expand-2.png" style="width: 75%;" /></a>
</div></blockquote>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Within this step, you have created a test case, configured the test case to run a ROBOT test, and executed the test case. You have also reviewed the results of the test case execution where you verified the routing information on the device. You can now move on to the next step to learn how to verify connectivity.</p>
</div>
<p><em>Section author: Nandakumar Arunachalam &lt;<a class="reference external" href="mailto:narunach&#37;&#52;&#48;cisco&#46;com">narunach<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jinrui Wang &lt;<a class="reference external" href="mailto:jinrwang&#37;&#52;&#48;cisco&#46;com">jinrwang<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Luis Rueda &lt;<a class="reference external" href="mailto:lurueda&#37;&#52;&#48;cisco&#46;com">lurueda<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;, Jairo Leon &lt;<a class="reference external" href="mailto:jaileon&#37;&#52;&#48;cisco&#46;com">jaileon<span>&#64;</span>cisco<span>&#46;</span>com</a>&gt;</em></p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="step2.html" class="btn btn-neutral float-left" title="Step 2: Add the device under test to the testbed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="step4.html" class="btn btn-neutral float-right" title="Step 4: Configure another script and execute it" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Cisco Systems, Inc. 2020.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>